# =============================================================================
# COSMIC COACH BACKEND - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control (already in .gitignore)
#
# Updated: 23 Nov 2025
# Multi-Agent Implementation: Added 15+ new variables for advanced features
# =============================================================================

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000
API_VERSION=v1

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://username:password@localhost:5432/cosmic_coach
DB_HOST=localhost
DB_PORT=5432
DB_NAME=cosmic_coach
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_SSL=false
DB_POOL_MIN=2
DB_POOL_MAX=10

# -----------------------------------------------------------------------------
# REDIS CACHE
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_PRIVATE_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=86400

# -----------------------------------------------------------------------------
# FIREBASE ADMIN (Existing)
# -----------------------------------------------------------------------------
FIREBASE_SERVICE_ACCOUNT={"type": "service_account", "project_id": "your-project"}
FIREBASE_DATABASE_URL=https://your-project.firebaseio.com
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com

# Firebase Cloud Messaging (for push notifications)
FCM_SERVER_KEY=your_fcm_server_key_here

# -----------------------------------------------------------------------------
# OPENAI API (Existing + New for Voice/Images)
# -----------------------------------------------------------------------------
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# Voice AI (NEW)
OPENAI_TTS_MODEL=tts-1
OPENAI_TTS_VOICE=alloy
VOICE_CACHE_TTL=86400

# Image Generation (NEW)
DALLE_MODEL=dall-e-3
DALLE_SIZE=1024x1024
DALLE_QUALITY=hd
DALLE_STYLE=vivid

# -----------------------------------------------------------------------------
# AWS S3 (for Image Storage) - NEW
# -----------------------------------------------------------------------------
AWS_S3_REGION=us-east-1
AWS_S3_BUCKET=cosmic-coach-images
AWS_S3_ACCESS_KEY=AKIA_YOUR_ACCESS_KEY
AWS_S3_SECRET_KEY=your_secret_access_key_here
AWS_S3_CDN_URL=https://d1234567890.cloudfront.net

# -----------------------------------------------------------------------------
# SENDGRID (for Email Notifications) - NEW
# -----------------------------------------------------------------------------
SENDGRID_API_KEY=SG.your_sendgrid_api_key_here
SENDGRID_FROM_EMAIL=noreply@cosmiccoach.app
SENDGRID_FROM_NAME=Cosmic Coach
SENDGRID_REPLY_TO=support@cosmiccoach.app

# -----------------------------------------------------------------------------
# STRIPE (for Payments & Subscriptions) - NEW
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PRICE_COSMIC=price_your_cosmic_tier_id
STRIPE_PRICE_UNIVERSE=price_your_universe_tier_id

# -----------------------------------------------------------------------------
# REVENUECAT (Alternative to Stripe for Mobile) - NEW
# -----------------------------------------------------------------------------
REVENUECAT_API_KEY=your_revenuecat_api_key
REVENUECAT_PUBLIC_KEY=your_revenuecat_public_key

# -----------------------------------------------------------------------------
# MONITORING & OBSERVABILITY - NEW
# -----------------------------------------------------------------------------
# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_ENABLED=true

# Grafana
GRAFANA_URL=http://localhost:3001
GRAFANA_API_KEY=your_grafana_api_key

# Sentry (Error Tracking)
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id
SENTRY_ENVIRONMENT=development
SENTRY_SAMPLE_RATE=1.0

# -----------------------------------------------------------------------------
# PAGERDUTY (Alerting) - NEW
# -----------------------------------------------------------------------------
PAGERDUTY_API_KEY=your_pagerduty_api_key
PAGERDUTY_SERVICE_ID=your_service_id
PAGERDUTY_ESCALATION_POLICY_ID=your_escalation_policy_id

# -----------------------------------------------------------------------------
# ANALYTICS - NEW
# -----------------------------------------------------------------------------
ANALYTICS_ENABLED=true
ANALYTICS_BATCH_SIZE=100
ANALYTICS_FLUSH_INTERVAL=60000

# Segment (optional)
SEGMENT_WRITE_KEY=your_segment_write_key

# Mixpanel (optional)
MIXPANEL_TOKEN=your_mixpanel_token

# -----------------------------------------------------------------------------
# NOTIFICATIONS - NEW
# -----------------------------------------------------------------------------
NOTIFICATION_BATCH_SIZE=100
NOTIFICATION_MAX_PER_DAY=3
NOTIFICATION_QUIET_START=22:00
NOTIFICATION_QUIET_END=08:00

# -----------------------------------------------------------------------------
# A/B TESTING - NEW
# -----------------------------------------------------------------------------
AB_TESTING_ENABLED=true
AB_TEST_MIN_SAMPLE_SIZE=100
AB_TEST_SIGNIFICANCE_LEVEL=0.05

# -----------------------------------------------------------------------------
# REVENUE OPTIMIZATION - NEW
# -----------------------------------------------------------------------------
DYNAMIC_PRICING_ENABLED=true
CHURN_PREDICTION_ENABLED=true
CHURN_PREDICTION_THRESHOLD=0.7
WIN_BACK_DISCOUNT_MIN=0.2
WIN_BACK_DISCOUNT_MAX=0.5

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# CORS
ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_EXPENSIVE_MAX=5

# Encryption
ENCRYPTION_KEY=your-32-character-encryption-key-here
ENCRYPTION_ALGORITHM=aes-256-cbc

# Admin
ADMIN_KEY=your_secure_admin_key_here

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
FEATURE_VOICE_AI=true
FEATURE_IMAGE_GENERATION=true
FEATURE_COMPATIBILITY=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_SMART_NOTIFICATIONS=true
FEATURE_AB_TESTING=true
FEATURE_REVENUE_OPTIMIZATION=true
FEATURE_CRISIS_PROTOCOL=true

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7

# -----------------------------------------------------------------------------
# CRON JOBS
# -----------------------------------------------------------------------------
CRON_DAILY_HOROSCOPE=0 0 * * *
CRON_ANALYTICS_REPORT=0 9 * * *
CRON_CHURN_PREDICTION=0 10 * * *
CRON_CLEANUP_OLD_DATA=0 2 * * *

# -----------------------------------------------------------------------------
# DEVELOPMENT TOOLS
# -----------------------------------------------------------------------------
DEBUG=false
VERBOSE_LOGGING=false
MOCK_EXTERNAL_APIS=false

# -----------------------------------------------------------------------------
# PRODUCTION-ONLY
# -----------------------------------------------------------------------------
# Uncomment and set these in production:
# NODE_ENV=production
# DEBUG=false
# DB_SSL=true
# REDIS_PASSWORD=your_redis_password
# SENTRY_ENVIRONMENT=production
