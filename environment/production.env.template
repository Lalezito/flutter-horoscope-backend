# PRODUCTION ENVIRONMENT CONFIGURATION TEMPLATE
# 
# This file contains all required environment variables for production deployment
# Copy this file to .env and replace all placeholder values with actual production values

# ==============================================================================
# üöÄ APPLICATION CONFIGURATION
# ==============================================================================

NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# Application identification
APP_NAME="Zodiac Life Coach Backend"
APP_VERSION="2.0.0"
INSTANCE_ID="{{REPLACE_WITH_UNIQUE_INSTANCE_ID}}"

# Timezone configuration
TZ=America/New_York

# ==============================================================================
# üóÑÔ∏è DATABASE CONFIGURATION
# ==============================================================================

# Primary PostgreSQL database (provided by Railway)
DATABASE_URL="{{REPLACE_WITH_RAILWAY_DATABASE_URL}}"

# Database connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=20
DATABASE_POOL_IDLE_TIMEOUT=30000
DATABASE_QUERY_TIMEOUT=60000

# Backup database configuration (optional)
BACKUP_DATABASE_URL="{{REPLACE_WITH_BACKUP_DATABASE_URL}}"

# ==============================================================================
# üî¥ REDIS CONFIGURATION (for horizontal scaling)
# ==============================================================================

REDIS_HOST="{{REPLACE_WITH_REDIS_HOST}}"
REDIS_PORT=6379
REDIS_PASSWORD="{{REPLACE_WITH_REDIS_PASSWORD}}"
REDIS_DATABASE=0
REDIS_KEY_PREFIX="zodiac:"
ENABLE_REDIS=true

# Redis connection settings
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_ATTEMPTS=3

# ==============================================================================
# ü§ñ OPENAI API CONFIGURATION
# ==============================================================================

# OpenAI API key (required for horoscope generation)
OPENAI_API_KEY="{{REPLACE_WITH_OPENAI_API_KEY}}"
OPENAI_MODEL="gpt-4"
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7
OPENAI_REQUEST_TIMEOUT=30000

# OpenAI usage limits
OPENAI_DAILY_REQUEST_LIMIT=1000
OPENAI_MONTHLY_BUDGET_LIMIT=200

# ==============================================================================
# üîê SECURITY CONFIGURATION
# ==============================================================================

# Admin access key (CRITICAL - Use strong random key)
ADMIN_KEY="{{REPLACE_WITH_STRONG_64_CHAR_ADMIN_KEY}}"

# Master encryption key for sensitive data
MASTER_ENCRYPTION_KEY="{{REPLACE_WITH_256_BIT_ENCRYPTION_KEY}}"

# JWT and session secrets
JWT_SECRET="{{REPLACE_WITH_STRONG_JWT_SECRET}}"
SESSION_SECRET="{{REPLACE_WITH_STRONG_SESSION_SECRET}}"
CSRF_SECRET="{{REPLACE_WITH_STRONG_CSRF_SECRET}}"

# Password requirements
MIN_PASSWORD_LENGTH=12
REQUIRE_PASSWORD_COMPLEXITY=true

# Security headers and HTTPS
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
ENABLE_SECURITY_HEADERS=true

# ==============================================================================
# üåê CORS AND NETWORK CONFIGURATION
# ==============================================================================

# Allowed origins for CORS (comma-separated, NO wildcards in production)
ALLOWED_ORIGINS="https://yourdomain.com,https://www.yourdomain.com,https://admin.yourdomain.com"

# Trusted proxy configuration
TRUSTED_PROXIES="127.0.0.1,::1"

# Rate limiting configuration
GLOBAL_RATE_LIMIT=1000
API_RATE_LIMIT=100
ADMIN_RATE_LIMIT=10

# ==============================================================================
# üìä MONITORING AND ALERTING
# ==============================================================================

# Webhook URLs for alerts (Slack, Discord, Teams, etc.)
WEBHOOK_ALERT_URL="{{REPLACE_WITH_SLACK_WEBHOOK_URL}}"
SECURITY_WEBHOOK_URL="{{REPLACE_WITH_SECURITY_ALERTS_WEBHOOK_URL}}"
PERFORMANCE_WEBHOOK_URL="{{REPLACE_WITH_PERFORMANCE_ALERTS_WEBHOOK_URL}}"

# Email alerting configuration
SMTP_SERVER="{{REPLACE_WITH_SMTP_SERVER}}"
SMTP_PORT=587
SMTP_USERNAME="{{REPLACE_WITH_SMTP_USERNAME}}"
SMTP_PASSWORD="{{REPLACE_WITH_SMTP_PASSWORD}}"
ALERT_EMAIL="{{REPLACE_WITH_ALERT_EMAIL_ADDRESS}}"

# Monitoring configuration
ENABLE_MONITORING=true
ENABLE_PERFORMANCE_TRACKING=true
ENABLE_ERROR_TRACKING=true
METRICS_RETENTION_DAYS=30

# ==============================================================================
# üíæ BACKUP AND DISASTER RECOVERY
# ==============================================================================

# Backup configuration
ENABLE_AUTOMATED_BACKUPS=true
BACKUP_SCHEDULE="0 3 * * *"  # Daily at 3 AM
BACKUP_RETENTION_DAYS=30

# Backup storage (S3-compatible)
BACKUP_S3_BUCKET="{{REPLACE_WITH_S3_BACKUP_BUCKET}}"
BACKUP_S3_REGION="{{REPLACE_WITH_S3_REGION}}"
BACKUP_S3_ACCESS_KEY="{{REPLACE_WITH_S3_ACCESS_KEY}}"
BACKUP_S3_SECRET_KEY="{{REPLACE_WITH_S3_SECRET_KEY}}"

# Cross-region replication
BACKUP_REPLICA_REGIONS="us-west-2,eu-west-1"

# Backup encryption
BACKUP_ENCRYPTION_KEY="{{REPLACE_WITH_BACKUP_ENCRYPTION_KEY}}"

# ==============================================================================
# üìã COMPLIANCE AND LEGAL
# ==============================================================================

# GDPR compliance
GDPR_COMPLIANCE_ENABLED=true
DATA_RETENTION_DAYS=730  # 2 years
CONSENT_MANAGEMENT_ENABLED=true
RIGHT_TO_ERASURE_ENABLED=true

# CCPA compliance
CCPA_COMPLIANCE_ENABLED=true
PRIVACY_NOTICE_URL="https://yourdomain.com/privacy"
OPT_OUT_ENABLED=true

# Legal URLs
PRIVACY_POLICY_URL="https://yourdomain.com/privacy"
TERMS_OF_SERVICE_URL="https://yourdomain.com/terms"
COOKIE_POLICY_URL="https://yourdomain.com/cookies"

# ==============================================================================
# ‚ö° CRON JOBS AND AUTOMATION
# ==============================================================================

# Cron job configuration
ENABLE_CRON_JOBS=true
DAILY_GENERATION_TIME="0 6 * * *"    # 6 AM daily
WEEKLY_GENERATION_TIME="30 5 * * 1"  # 5:30 AM Monday
CLEANUP_TIME="0 2 * * *"              # 2 AM daily

# Content generation settings
GENERATE_DAILY_HOROSCOPES=true
GENERATE_WEEKLY_HOROSCOPES=true
PREGENERATE_CONTENT=true

# ==============================================================================
# üîß LOAD BALANCING AND SCALING
# ==============================================================================

# Load balancing configuration
ENABLE_LOAD_BALANCER=true
LOAD_BALANCER_ALGORITHM="health_based"
HEALTH_CHECK_INTERVAL=30000
MAX_FAILURES=3
STICKY_SESSIONS=true

# Auto-scaling configuration
ENABLE_AUTO_SCALING=true
SCALE_UP_THRESHOLD=80     # CPU percentage
SCALE_DOWN_THRESHOLD=20   # CPU percentage
MIN_INSTANCES=2
MAX_INSTANCES=10

# Circuit breaker configuration
CIRCUIT_BREAKER_THRESHOLD=50  # Error percentage
CIRCUIT_BREAKER_TIMEOUT=60000  # 1 minute
CIRCUIT_BREAKER_RESET_TIMEOUT=300000  # 5 minutes

# ==============================================================================
# üéØ FEATURE FLAGS
# ==============================================================================

# Feature toggles
ENABLE_ANALYTICS=true
ENABLE_A_B_TESTING=false
ENABLE_PREMIUM_FEATURES=true
ENABLE_EXPERIMENTAL_FEATURES=false

# Content features
ENABLE_MULTILINGUAL_SUPPORT=true
ENABLE_PERSONALIZATION=true
ENABLE_COMPATIBILITY_MATCHING=true

# ==============================================================================
# üìà ANALYTICS AND TRACKING
# ==============================================================================

# Analytics configuration
ANALYTICS_PROVIDER="internal"
ENABLE_USER_TRACKING=false  # GDPR compliance
ENABLE_ERROR_ANALYTICS=true
ENABLE_PERFORMANCE_ANALYTICS=true

# Data collection settings
COLLECT_USER_PREFERENCES=true
COLLECT_USAGE_STATISTICS=true
ANONYMIZE_USER_DATA=true

# ==============================================================================
# üö® EMERGENCY CONFIGURATION
# ==============================================================================

# Emergency contacts
EMERGENCY_CONTACT_EMAIL="{{REPLACE_WITH_EMERGENCY_EMAIL}}"
EMERGENCY_PHONE="{{REPLACE_WITH_EMERGENCY_PHONE}}"
ESCALATION_EMAIL="{{REPLACE_WITH_ESCALATION_EMAIL}}"

# Emergency procedures
ENABLE_EMERGENCY_MODE=false
EMERGENCY_RATE_LIMIT=10
EMERGENCY_READ_ONLY_MODE=false

# Incident response
INCIDENT_WEBHOOK_URL="{{REPLACE_WITH_INCIDENT_WEBHOOK_URL}}"
ENABLE_AUTOMATIC_ROLLBACK=true
ROLLBACK_THRESHOLD=5  # Consecutive failures

# ==============================================================================
# üß™ TESTING AND VALIDATION
# ==============================================================================

# Testing configuration (only for staging/testing)
ENABLE_TESTING_ENDPOINTS=false
MOCK_EXTERNAL_APIS=false
ENABLE_TEST_DATA=false

# Performance testing
LOAD_TEST_ENABLED=false
PERFORMANCE_BUDGET_MS=2000  # Max response time
ERROR_BUDGET_PERCENT=1      # Max error rate

# ==============================================================================
# üì± MOBILE APP INTEGRATION
# ==============================================================================

# Mobile app configuration
MOBILE_API_VERSION="v2"
ENABLE_MOBILE_PUSH_NOTIFICATIONS=true
MOBILE_APP_BUNDLE_ID="com.zodiac.app"

# Firebase configuration (for mobile notifications)
FIREBASE_PROJECT_ID="{{REPLACE_WITH_FIREBASE_PROJECT_ID}}"
FIREBASE_PRIVATE_KEY="{{REPLACE_WITH_FIREBASE_PRIVATE_KEY}}"
FIREBASE_CLIENT_EMAIL="{{REPLACE_WITH_FIREBASE_CLIENT_EMAIL}}"

# ==============================================================================
# üé® UI AND BRANDING
# ==============================================================================

# Branding configuration
COMPANY_NAME="Zodiac Life Coach"
SUPPORT_EMAIL="support@yourdomain.com"
BRAND_COLOR="#667eea"

# Dashboard configuration
ENABLE_ADMIN_DASHBOARD=true
DASHBOARD_THEME="dark"
DASHBOARD_AUTO_REFRESH=true

# ==============================================================================
# üí∞ BILLING AND MONETIZATION
# ==============================================================================

# Subscription configuration
ENABLE_SUBSCRIPTIONS=true
STRIPE_PUBLISHABLE_KEY="{{REPLACE_WITH_STRIPE_PUBLISHABLE_KEY}}"
STRIPE_SECRET_KEY="{{REPLACE_WITH_STRIPE_SECRET_KEY}}"
STRIPE_WEBHOOK_SECRET="{{REPLACE_WITH_STRIPE_WEBHOOK_SECRET}}"

# Pricing configuration
MONTHLY_SUBSCRIPTION_PRICE=499    # $4.99 in cents
ANNUAL_SUBSCRIPTION_PRICE=4999    # $49.99 in cents
FREE_TIER_DAILY_LIMIT=5

# ==============================================================================
# üåç INTERNATIONALIZATION
# ==============================================================================

# Language support
DEFAULT_LANGUAGE="en"
SUPPORTED_LANGUAGES="en,es,fr,de,it,pt"
ENABLE_AUTO_TRANSLATION=false

# Localization
DATE_FORMAT="YYYY-MM-DD"
TIME_FORMAT="HH:mm:ss"
TIMEZONE_DETECTION=true

# ==============================================================================
# ‚ö†Ô∏è  IMPORTANT SECURITY NOTES
# ==============================================================================

# 1. Replace ALL placeholder values marked with {{REPLACE_WITH_...}}
# 2. Use strong, unique passwords and keys (minimum 32 characters)
# 3. Never commit this file with actual values to version control
# 4. Store secrets in Railway's environment variable system
# 5. Regularly rotate all keys and secrets (at least quarterly)
# 6. Monitor for any unauthorized access or suspicious activity
# 7. Keep backup copies of this configuration in a secure location
# 8. Test all configuration changes in staging before production
# 9. Use environment-specific values (no shared secrets between environments)
# 10. Enable all security features and monitoring in production

# ==============================================================================
# üìù CONFIGURATION VALIDATION CHECKLIST
# ==============================================================================

# Before deploying to production, ensure:
# [ ] All {{REPLACE_WITH_...}} placeholders are replaced with real values
# [ ] All secrets are strong and unique (use password generators)
# [ ] CORS origins are specific (no wildcards)
# [ ] HTTPS is enforced
# [ ] All monitoring and alerting is configured
# [ ] Backup systems are tested and working
# [ ] Rate limits are appropriate for your usage
# [ ] Database connections are properly configured
# [ ] All external service credentials are valid
# [ ] Security headers are enabled
# [ ] Audit logging is functioning
# [ ] Compliance settings match your requirements
# [ ] Emergency contacts are correct and reachable